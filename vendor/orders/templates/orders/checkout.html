{% extends 'base.html' %}
{% block content %}

<div class="row">
  <div class="col-md-7">
    <h4>Select Address</h4>

    <form method="post">
      {% csrf_token %}

      {% if addresses %}
        {% for addr in addresses %}
          <div class="form-check mb-2">
            <input class="form-check-input" type="radio" name="address" value="{{ addr.id }}">
            <label class="form-check-label">
              <strong>{{ addr.full_name }}</strong>,
              {{ addr.address }}, {{ addr.city }} - {{ addr.pincode }}
            </label>
          </div>
        {% endfor %}
        <hr>
        <p class="fw-bold">OR Add New Address</p>
      {% endif %}

      <input class="form-control mb-2" name="full_name" placeholder="Full Name">
      <input class="form-control mb-2" name="phone" placeholder="Phone">
      <textarea class="form-control mb-2" name="address_text" placeholder="Address"></textarea>

      <div class="row">
        <div class="col">
          <input class="form-control mb-2" name="city" placeholder="City">
        </div>
        <div class="col">
          <input class="form-control mb-2" name="state" placeholder="State">
        </div>
      </div>

      <input class="form-control mb-3" name="pincode" placeholder="Pincode">

      <button class="btn btn-success w-100">
        Place Order
      </button>
    </form>
  </div>

  <div class="col-md-5">
    <h4>Order Summary</h4>
    <ul class="list-group">
      {% for item in cart %}
        <li class="list-group-item d-flex justify-content-between">
          {{ item.product.name }} × {{ item.quantity }}
          <strong>₹{{ item.total_price }}</strong>
        </li>
      {% endfor %}
      <li class="list-group-item d-flex justify-content-between fw-bold">
        Total <span>₹{{ cart.get_total_price }}</span>
      </li>
    </ul>
  </div>
</div>

{% endblock %}
